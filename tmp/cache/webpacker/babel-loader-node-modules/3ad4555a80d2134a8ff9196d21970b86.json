{"ast":null,"code":"import consumer from \"./consumer\";\n$(document).on('turbolinks:load', function () {\n  $('[data-channel-subscribe=\"conversation\"]').each(function (index, element) {\n    var $element = $(element),\n        $chatList = $('#message_list'),\n        $form = $('#new_message'),\n        conversation_id = $element.data('conversation-id'),\n        user_id = $element.data('user-id');\n    consumer.subscriptions.create({\n      channel: \"MessageChannel\",\n      conversation: conversation_id\n    }, {\n      received: function received(data) {\n        if (data.sender_id == user_id) {\n          $chatList.append(data.sender);\n        } else {\n          $chatList.append(data.receiver);\n        }\n\n        $form[0].reset();\n        $chatList.animate({\n          scrollTop: $chatList.prop(\"scrollHeight\")\n        }, 1000);\n      }\n    });\n  });\n});","map":{"version":3,"sources":["/Users/shahinfarzane/Desktop/NewProject copy/app/javascript/channels/message_channel.js"],"names":["consumer","$","document","on","each","index","element","$element","$chatList","$form","conversation_id","data","user_id","subscriptions","create","channel","conversation","received","sender_id","append","sender","receiver","reset","animate","scrollTop","prop"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,YAArB;AAEAC,CAAC,CAACC,QAAD,CAAD,CAAYC,EAAZ,CAAe,iBAAf,EAAkC,YAAM;AACpCF,EAAAA,CAAC,CAAC,yCAAD,CAAD,CAA6CG,IAA7C,CAAkD,UAASC,KAAT,EAAgBC,OAAhB,EAAyB;AACvE,QAAIC,QAAQ,GAAGN,CAAC,CAACK,OAAD,CAAhB;AAAA,QACIE,SAAS,GAAGP,CAAC,CAAC,eAAD,CADjB;AAAA,QAEIQ,KAAK,GAAGR,CAAC,CAAC,cAAD,CAFb;AAAA,QAIIS,eAAe,GAAGH,QAAQ,CAACI,IAAT,CAAc,iBAAd,CAJtB;AAAA,QAKIC,OAAO,GAAGL,QAAQ,CAACI,IAAT,CAAc,SAAd,CALd;AAOAX,IAAAA,QAAQ,CAACa,aAAT,CAAuBC,MAAvB,CACI;AACIC,MAAAA,OAAO,EAAE,gBADb;AAEIC,MAAAA,YAAY,EAAEN;AAFlB,KADJ,EAKI;AACIO,MAAAA,QAAQ,EAAE,kBAASN,IAAT,EAAe;AACrB,YAAIA,IAAI,CAACO,SAAL,IAAkBN,OAAtB,EAA+B;AAC3BJ,UAAAA,SAAS,CAACW,MAAV,CAAiBR,IAAI,CAACS,MAAtB;AACH,SAFD,MAEO;AACHZ,UAAAA,SAAS,CAACW,MAAV,CAAiBR,IAAI,CAACU,QAAtB;AACH;;AAEDZ,QAAAA,KAAK,CAAC,CAAD,CAAL,CAASa,KAAT;AACAd,QAAAA,SAAS,CAACe,OAAV,CAAkB;AAAEC,UAAAA,SAAS,EAAEhB,SAAS,CAACiB,IAAV,CAAe,cAAf;AAAb,SAAlB,EAAiE,IAAjE;AACH;AAVL,KALJ;AAkBH,GA1BD;AA2BH,CA5BD","sourcesContent":["import consumer from \"./consumer\"\n\n$(document).on('turbolinks:load', () => {\n    $('[data-channel-subscribe=\"conversation\"]').each(function(index, element) {\n        var $element = $(element),\n            $chatList = $('#message_list'),\n            $form = $('#new_message'),\n\n            conversation_id = $element.data('conversation-id'),\n            user_id = $element.data('user-id')\n\n        consumer.subscriptions.create(\n            {\n                channel: \"MessageChannel\",\n                conversation: conversation_id\n            },\n            {\n                received: function(data) {\n                    if (data.sender_id == user_id) {\n                        $chatList.append(data.sender)\n                    } else {\n                        $chatList.append(data.receiver)\n                    }\n\n                    $form[0].reset();\n                    $chatList.animate({ scrollTop: $chatList.prop(\"scrollHeight\") }, 1000)\n                }\n            }\n        )\n    });\n});"]},"metadata":{},"sourceType":"module"}